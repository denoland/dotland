/* esm.sh - esbuild bundle(htmlparser2@6.1.0) deno production */
import __entities_lib_maps_xml_json$ from "/v78/entities@2.2.0/deno/lib/maps/xml.json.js";import __entities_lib_maps_legacy_json$ from "/v78/entities@2.2.0/deno/lib/maps/legacy.json.js";import __entities_lib_maps_entities_json$ from "/v78/entities@2.2.0/deno/lib/maps/entities.json.js";import * as __entities_lib_decode_codepoint$$ from "/v78/entities@2.2.0/deno/lib/decode_codepoint.js";const __entities_lib_decode_codepoint$=Object.assign({__esModule:true},__entities_lib_decode_codepoint$$);import __domutils$ from "/v78/domutils@2.8.0/deno/domutils.js";import * as __domelementtype$ from "/v78/domelementtype@2.3.0/deno/domelementtype.js";import * as __domhandler$$ from "/v78/domhandler@4.3.1/deno/domhandler.js";const __domhandler$=Object.assign({__esModule:true},__domhandler$$);var it=Object.create;var L=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var at=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,rt=Object.prototype.hasOwnProperty;var g=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,i)=>(typeof require!="undefined"?require:t)[i]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var D=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ot=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of at(t))!rt.call(e,a)&&a!==i&&L(e,a,{get:()=>t[a],enumerable:!(s=st(t,a))||s.enumerable});return e};var q=(e,t,i)=>(i=e!=null?it(nt(e)):{},ot(t||!e||!e.__esModule?L(i,"default",{value:e,enumerable:!0}):i,e));var B=D(C=>{"use strict";var A=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C,"__esModule",{value:!0});var ht=A(__entities_lib_decode_codepoint$),ft=A(__entities_lib_maps_entities_json$),P=A(__entities_lib_maps_legacy_json$),lt=A(__entities_lib_maps_xml_json$);function d(e){return e===" "||e===`
`||e==="	"||e==="\f"||e==="\r"}function V(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function f(e,t,i){var s=e.toLowerCase();return e===s?function(a,n){n===s?a._state=t:(a._state=i,a._index--)}:function(a,n){n===s||n===e?a._state=t:(a._state=i,a._index--)}}function c(e,t){var i=e.toLowerCase();return function(s,a){a===i||a===e?s._state=t:(s._state=3,s._index--)}}var ut=f("C",24,16),dt=f("D",25,16),ct=f("A",26,16),_t=f("T",27,16),pt=f("A",28,16),bt=c("R",35),vt=c("I",36),gt=c("P",37),yt=c("T",38),mt=f("R",40,1),St=f("I",41,1),xt=f("P",42,1),Tt=f("T",43,1),wt=c("Y",45),Ct=c("L",46),Dt=c("E",47),At=f("Y",49,1),It=f("L",50,1),Et=f("E",51,1),Ot=c("I",54),Pt=c("T",55),Bt=c("L",56),Nt=c("E",57),kt=f("I",58,1),jt=f("T",59,1),Mt=f("L",60,1),zt=f("E",61,1),Ht=f("#",63,64),Lt=f("X",66,65),qt=function(){function e(t,i){var s;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=i,this.xmlMode=!!t?.xmlMode,this.decodeEntities=(s=t?.decodeEntities)!==null&&s!==void 0?s:!0}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(t){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=t,this.parse()},e.prototype.end=function(t){this.ended&&this.cbs.onerror(Error(".end() after done!")),t&&this.write(t),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(t){t==="<"?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):this.decodeEntities&&t==="&"&&(this.special===1||this.special===4)&&(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(t){return V(t)||this.xmlMode&&!d(t)&&t!=="/"&&t!==">"},e.prototype.stateBeforeTagName=function(t){t==="/"?this._state=5:t==="<"?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):t===">"||this.special!==1||d(t)?this._state=1:t==="!"?(this._state=15,this.sectionStart=this._index+1):t==="?"?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(t)?(this._state=!this.xmlMode&&(t==="s"||t==="S")?32:!this.xmlMode&&(t==="t"||t==="T")?52:3,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(t){(t==="/"||t===">"||d(t))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(t){d(t)||(t===">"?this._state=1:this.special!==1?this.special!==4&&(t==="s"||t==="S")?this._state=33:this.special===4&&(t==="t"||t==="T")?this._state=53:(this._state=1,this._index--):this.isTagStartChar(t)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(t){(t===">"||d(t))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(t){t===">"&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(t){t===">"?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):t==="/"?this._state=4:d(t)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(t){t===">"?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):d(t)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(t){(t==="="||t==="/"||t===">"||d(t))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(t){t==="="?this._state=11:t==="/"||t===">"?(this.cbs.onattribend(void 0),this._state=8,this._index--):d(t)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(t){t==='"'?(this._state=12,this.sectionStart=this._index+1):t==="'"?(this._state=13,this.sectionStart=this._index+1):d(t)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(t,i){t===i?(this.emitToken("onattribdata"),this.cbs.onattribend(i),this._state=8):this.decodeEntities&&t==="&"&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(t){this.handleInAttributeValue(t,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(t){this.handleInAttributeValue(t,"'")},e.prototype.stateInAttributeValueNoQuotes=function(t){d(t)||t===">"?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&t==="&"&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(t){this._state=t==="["?23:t==="-"?18:16},e.prototype.stateInDeclaration=function(t){t===">"&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(t){t===">"&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(t){t==="-"?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(t){t==="-"&&(this._state=21)},e.prototype.stateInSpecialComment=function(t){t===">"&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(t){t==="-"?this._state=22:this._state=19},e.prototype.stateAfterComment2=function(t){t===">"?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):t!=="-"&&(this._state=19)},e.prototype.stateBeforeCdata6=function(t){t==="["?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(t){t==="]"&&(this._state=30)},e.prototype.stateAfterCdata1=function(t){t==="]"?this._state=31:this._state=29},e.prototype.stateAfterCdata2=function(t){t===">"?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):t!=="]"&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(t){t==="c"||t==="C"?this._state=34:t==="t"||t==="T"?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(t){this.special===2&&(t==="c"||t==="C")?this._state=39:this.special===3&&(t==="t"||t==="T")?this._state=48:this._state=1},e.prototype.stateBeforeSpecialLast=function(t,i){(t==="/"||t===">"||d(t))&&(this.special=i),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(t,i){t===">"||d(t)?(this.special=1,this._state=6,this.sectionStart=this._index-i,this._index--):this._state=1},e.prototype.parseFixedEntity=function(t){if(t===void 0&&(t=this.xmlMode?lt.default:ft.default),this.sectionStart+1<this._index){var i=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(t,i)&&(this.emitPartial(t[i]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var t=this.sectionStart+1,i=Math.min(this._index-t,6);i>=2;){var s=this.buffer.substr(t,i);if(Object.prototype.hasOwnProperty.call(P.default,s)){this.emitPartial(P.default[s]),this.sectionStart+=i+1;return}i--}},e.prototype.stateInNamedEntity=function(t){t===";"?(this.parseFixedEntity(),this.baseState===1&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(t<"0"||t>"9")&&!V(t)&&(this.xmlMode||this.sectionStart+1===this._index||(this.baseState!==1?t!=="="&&this.parseFixedEntity(P.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(t,i,s){var a=this.sectionStart+t;if(a!==this._index){var n=this.buffer.substring(a,this._index),h=parseInt(n,i);this.emitPartial(ht.default(h)),this.sectionStart=s?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(t){t===";"?this.decodeNumericEntity(2,10,!0):(t<"0"||t>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(t){t===";"?this.decodeNumericEntity(3,16,!0):(t<"a"||t>"f")&&(t<"A"||t>"F")&&(t<"0"||t>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(this._state===1?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var t=this.buffer.charAt(this._index);this._state===1?this.stateText(t):this._state===12?this.stateInAttributeValueDoubleQuotes(t):this._state===9?this.stateInAttributeName(t):this._state===19?this.stateInComment(t):this._state===20?this.stateInSpecialComment(t):this._state===8?this.stateBeforeAttributeName(t):this._state===3?this.stateInTagName(t):this._state===6?this.stateInClosingTagName(t):this._state===2?this.stateBeforeTagName(t):this._state===10?this.stateAfterAttributeName(t):this._state===13?this.stateInAttributeValueSingleQuotes(t):this._state===11?this.stateBeforeAttributeValue(t):this._state===5?this.stateBeforeClosingTagName(t):this._state===7?this.stateAfterClosingTagName(t):this._state===32?this.stateBeforeSpecialS(t):this._state===21?this.stateAfterComment1(t):this._state===14?this.stateInAttributeValueNoQuotes(t):this._state===4?this.stateInSelfClosingTag(t):this._state===16?this.stateInDeclaration(t):this._state===15?this.stateBeforeDeclaration(t):this._state===22?this.stateAfterComment2(t):this._state===18?this.stateBeforeComment(t):this._state===33?this.stateBeforeSpecialSEnd(t):this._state===53?kt(this,t):this._state===39?mt(this,t):this._state===40?St(this,t):this._state===41?xt(this,t):this._state===34?bt(this,t):this._state===35?vt(this,t):this._state===36?gt(this,t):this._state===37?yt(this,t):this._state===38?this.stateBeforeSpecialLast(t,2):this._state===42?Tt(this,t):this._state===43?this.stateAfterSpecialLast(t,6):this._state===44?wt(this,t):this._state===29?this.stateInCdata(t):this._state===45?Ct(this,t):this._state===46?Dt(this,t):this._state===47?this.stateBeforeSpecialLast(t,3):this._state===48?At(this,t):this._state===49?It(this,t):this._state===50?Et(this,t):this._state===51?this.stateAfterSpecialLast(t,5):this._state===52?Ot(this,t):this._state===54?Pt(this,t):this._state===55?Bt(this,t):this._state===56?Nt(this,t):this._state===57?this.stateBeforeSpecialLast(t,4):this._state===58?jt(this,t):this._state===59?Mt(this,t):this._state===60?zt(this,t):this._state===61?this.stateAfterSpecialLast(t,5):this._state===17?this.stateInProcessingInstruction(t):this._state===64?this.stateInNamedEntity(t):this._state===23?ut(this,t):this._state===62?Ht(this,t):this._state===24?dt(this,t):this._state===25?ct(this,t):this._state===30?this.stateAfterCdata1(t):this._state===31?this.stateAfterCdata2(t):this._state===26?_t(this,t):this._state===27?pt(this,t):this._state===28?this.stateBeforeCdata6(t):this._state===66?this.stateInHexEntity(t):this._state===65?this.stateInNumericEntity(t):this._state===63?Lt(this,t):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var t=this.buffer.substr(this.sectionStart);this._state===29||this._state===30||this._state===31?this.cbs.oncdata(t):this._state===19||this._state===21||this._state===22?this.cbs.oncomment(t):this._state===64&&!this.xmlMode?(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state===65&&!this.xmlMode?(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state===66&&!this.xmlMode?(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state!==3&&this._state!==8&&this._state!==11&&this._state!==10&&this._state!==9&&this._state!==13&&this._state!==12&&this._state!==14&&this._state!==6&&this.cbs.ontext(t)},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(t){this.cbs[t](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(t){this.baseState!==1?this.cbs.onattribdata(t):this.cbs.ontext(t)},e}();C.default=qt});var k=D(x=>{"use strict";var Vt=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(x,"__esModule",{value:!0});x.Parser=void 0;var Qt=Vt(B()),S=new Set(["input","option","optgroup","select","button","datalist","textarea"]),o=new Set(["p"]),Q={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:o,h1:o,h2:o,h3:o,h4:o,h5:o,h6:o,select:S,input:S,output:S,button:S,datalist:S,textarea:S,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:o,article:o,aside:o,blockquote:o,details:o,div:o,dl:o,fieldset:o,figcaption:o,figure:o,footer:o,form:o,header:o,hr:o,main:o,nav:o,ol:o,pre:o,section:o,table:o,ul:o,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},N=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),R=new Set(["math","svg"]),$=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Rt=/\s|\//,$t=function(){function e(t,i){i===void 0&&(i={});var s,a,n,h,_;this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=i,this.cbs=t??{},this.lowerCaseTagNames=(s=i.lowerCaseTags)!==null&&s!==void 0?s:!i.xmlMode,this.lowerCaseAttributeNames=(a=i.lowerCaseAttributeNames)!==null&&a!==void 0?a:!i.xmlMode,this.tokenizer=new((n=i.Tokenizer)!==null&&n!==void 0?n:Qt.default)(this.options,this),(_=(h=this.cbs).onparserinit)===null||_===void 0||_.call(h,this)}return e.prototype.updatePosition=function(t){this.endIndex===null?this.tokenizer.sectionStart<=t?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-t:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(t){var i,s;this.updatePosition(1),this.endIndex--,(s=(i=this.cbs).ontext)===null||s===void 0||s.call(i,t)},e.prototype.onopentagname=function(t){var i,s;if(this.lowerCaseTagNames&&(t=t.toLowerCase()),this.tagname=t,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(Q,t))for(var a=void 0;this.stack.length>0&&Q[t].has(a=this.stack[this.stack.length-1]);)this.onclosetag(a);(this.options.xmlMode||!N.has(t))&&(this.stack.push(t),R.has(t)?this.foreignContext.push(!0):$.has(t)&&this.foreignContext.push(!1)),(s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,t),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var t,i;this.updatePosition(1),this.attribs&&((i=(t=this.cbs).onopentag)===null||i===void 0||i.call(t,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&N.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(t){if(this.updatePosition(1),this.lowerCaseTagNames&&(t=t.toLowerCase()),(R.has(t)||$.has(t))&&this.foreignContext.pop(),this.stack.length&&(this.options.xmlMode||!N.has(t))){var i=this.stack.lastIndexOf(t);if(i!==-1)if(this.cbs.onclosetag)for(i=this.stack.length-i;i--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=i;else t==="p"&&!this.options.xmlMode&&(this.onopentagname(t),this.closeCurrentTag())}else!this.options.xmlMode&&(t==="br"||t==="p")&&(this.onopentagname(t),this.closeCurrentTag())},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var t,i,s=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===s&&((i=(t=this.cbs).onclosetag)===null||i===void 0||i.call(t,s),this.stack.pop())},e.prototype.onattribname=function(t){this.lowerCaseAttributeNames&&(t=t.toLowerCase()),this.attribname=t},e.prototype.onattribdata=function(t){this.attribvalue+=t},e.prototype.onattribend=function(t){var i,s;(s=(i=this.cbs).onattribute)===null||s===void 0||s.call(i,this.attribname,this.attribvalue,t),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(t){var i=t.search(Rt),s=i<0?t:t.substr(0,i);return this.lowerCaseTagNames&&(s=s.toLowerCase()),s},e.prototype.ondeclaration=function(t){if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(t);this.cbs.onprocessinginstruction("!"+i,"!"+t)}},e.prototype.onprocessinginstruction=function(t){if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(t);this.cbs.onprocessinginstruction("?"+i,"?"+t)}},e.prototype.oncomment=function(t){var i,s,a,n;this.updatePosition(4),(s=(i=this.cbs).oncomment)===null||s===void 0||s.call(i,t),(n=(a=this.cbs).oncommentend)===null||n===void 0||n.call(a)},e.prototype.oncdata=function(t){var i,s,a,n,h,_;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?((s=(i=this.cbs).oncdatastart)===null||s===void 0||s.call(i),(n=(a=this.cbs).ontext)===null||n===void 0||n.call(a,t),(_=(h=this.cbs).oncdataend)===null||_===void 0||_.call(h)):this.oncomment("[CDATA["+t+"]]")},e.prototype.onerror=function(t){var i,s;(s=(i=this.cbs).onerror)===null||s===void 0||s.call(i,t)},e.prototype.onend=function(){var t,i;if(this.cbs.onclosetag)for(var s=this.stack.length;s>0;this.cbs.onclosetag(this.stack[--s]));(i=(t=this.cbs).onend)===null||i===void 0||i.call(t)},e.prototype.reset=function(){var t,i,s,a;(i=(t=this.cbs).onreset)===null||i===void 0||i.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],(a=(s=this.cbs).onparserinit)===null||a===void 0||a.call(s,this)},e.prototype.parseComplete=function(t){this.reset(),this.end(t)},e.prototype.write=function(t){this.tokenizer.write(t)},e.prototype.end=function(t){this.tokenizer.end(t)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(t){this.write(t)},e.prototype.done=function(t){this.end(t)},e}();x.Parser=$t});var M=D(l=>{"use strict";var Ft=l&&l.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function s(){this.constructor=t}t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ut=l&&l.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),Yt=l&&l.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xt=l&&l.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&Ut(t,e,i);return Yt(t,e),t},Zt=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});l.parseFeed=l.FeedHandler=void 0;var Gt=Zt(__domhandler$),E=Xt(__domutils$),Jt=k(),F;(function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"})(F||(F={}));var U;(function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"})(U||(U={}));var Z=function(e){Ft(t,e);function t(i,s){var a=this;return typeof i=="object"&&(i=void 0,s=i),a=e.call(this,i,s)||this,a}return t.prototype.onend=function(){var i,s,a=I(Kt,this.dom);if(!a){this.handleCallback(new Error("couldn't find root of feed"));return}var n={};if(a.name==="feed"){var h=a.children;n.type="atom",u(n,"id","id",h),u(n,"title","title",h);var _=X("href",I("link",h));_&&(n.link=_),u(n,"description","subtitle",h);var T=m("updated",h);T&&(n.updated=new Date(T)),u(n,"author","email",h,!0),n.items=j("entry",h).map(function(et){var y={},b=et.children;u(y,"id","id",b),u(y,"title","title",b);var p=X("href",I("link",b));p&&(y.link=p);var v=m("summary",b)||m("content",b);v&&(y.description=v);var w=m("updated",b);return w&&(y.pubDate=new Date(w)),y.media=Y(b),y})}else{var h=(s=(i=I("channel",a.children))===null||i===void 0?void 0:i.children)!==null&&s!==void 0?s:[];n.type=a.name.substr(0,3),n.id="",u(n,"title","title",h),u(n,"link","link",h),u(n,"description","description",h);var T=m("lastBuildDate",h);T&&(n.updated=new Date(T)),u(n,"author","managingEditor",h,!0),n.items=j("item",a.children).map(function(b){var p={},v=b.children;u(p,"id","guid",v),u(p,"title","title",v),u(p,"link","link",v),u(p,"description","description",v);var w=m("pubDate",v);return w&&(p.pubDate=new Date(w)),p.media=Y(v),p})}this.feed=n,this.handleCallback(null)},t}(Gt.default);l.FeedHandler=Z;function Y(e){return j("media:content",e).map(function(t){var i={medium:t.attribs.medium,isDefault:!!t.attribs.isDefault};return t.attribs.url&&(i.url=t.attribs.url),t.attribs.fileSize&&(i.fileSize=parseInt(t.attribs.fileSize,10)),t.attribs.type&&(i.type=t.attribs.type),t.attribs.expression&&(i.expression=t.attribs.expression),t.attribs.bitrate&&(i.bitrate=parseInt(t.attribs.bitrate,10)),t.attribs.framerate&&(i.framerate=parseInt(t.attribs.framerate,10)),t.attribs.samplingrate&&(i.samplingrate=parseInt(t.attribs.samplingrate,10)),t.attribs.channels&&(i.channels=parseInt(t.attribs.channels,10)),t.attribs.duration&&(i.duration=parseInt(t.attribs.duration,10)),t.attribs.height&&(i.height=parseInt(t.attribs.height,10)),t.attribs.width&&(i.width=parseInt(t.attribs.width,10)),t.attribs.lang&&(i.lang=t.attribs.lang),i})}function j(e,t){return E.getElementsByTagName(e,t,!0)}function I(e,t){return E.getElementsByTagName(e,t,!0,1)[0]}function m(e,t,i){return i===void 0&&(i=!1),E.getText(E.getElementsByTagName(e,t,i,1)).trim()}function X(e,t){if(!t)return null;var i=t.attribs;return i[e]}function u(e,t,i,s,a){a===void 0&&(a=!1);var n=m(i,s,a);n&&(e[t]=n)}function Kt(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}function Wt(e,t){t===void 0&&(t={xmlMode:!0});var i=new Z(t);return new Jt.Parser(i,t).end(e),i.feed}l.parseFeed=Wt});var H=D(r=>{"use strict";var G=r&&r.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),te=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),J=r&&r.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&G(t,e,i);return te(t,e),t},ee=r&&r.__exportStar||function(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&G(t,e,i)},ie=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});r.RssHandler=r.DefaultHandler=r.DomUtils=r.ElementType=r.Tokenizer=r.createDomStream=r.parseDOM=r.parseDocument=r.DomHandler=r.Parser=void 0;var z=k();Object.defineProperty(r,"Parser",{enumerable:!0,get:function(){return z.Parser}});var O=__domhandler$;Object.defineProperty(r,"DomHandler",{enumerable:!0,get:function(){return O.DomHandler}});Object.defineProperty(r,"DefaultHandler",{enumerable:!0,get:function(){return O.DomHandler}});function K(e,t){var i=new O.DomHandler(void 0,t);return new z.Parser(i,t).end(e),i.root}r.parseDocument=K;function se(e,t){return K(e,t).children}r.parseDOM=se;function ae(e,t,i){var s=new O.DomHandler(e,t,i);return new z.Parser(s,t)}r.createDomStream=ae;var ne=B();Object.defineProperty(r,"Tokenizer",{enumerable:!0,get:function(){return ie(ne).default}});var re=J(__domelementtype$);r.ElementType=re;ee(M(),r);r.DomUtils=J(__domutils$);var oe=M();Object.defineProperty(r,"RssHandler",{enumerable:!0,get:function(){return oe.FeedHandler}})});var W=q(H()),tt=q(H()),{__esModule:pe,RssHandler:be,Parser:ve,DomHandler:ge,DefaultHandler:ye,parseDocument:me,parseDOM:Se,createDomStream:xe,Tokenizer:Te,ElementType:we,DomUtils:Ce}=tt,{default:he,...fe}=tt,De=W.default??he??fe;export{ye as DefaultHandler,ge as DomHandler,Ce as DomUtils,we as ElementType,ve as Parser,be as RssHandler,Te as Tokenizer,pe as __esModule,xe as createDomStream,De as default,Se as parseDOM,me as parseDocument};

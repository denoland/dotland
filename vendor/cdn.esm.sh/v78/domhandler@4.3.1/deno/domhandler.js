/* esm.sh - esbuild bundle(domhandler@4.3.1) deno production */
import * as __domelementtype$ from "/v78/domelementtype@2.3.0/deno/domelementtype.js";var V=Object.create;var C=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var J=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var E=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,n)=>(typeof require!="undefined"?require:e)[n]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Q=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of G(e))!K.call(t,r)&&r!==n&&C(t,r,{get:()=>e[r],enumerable:!(i=F(e,r))||i.enumerable});return t};var w=(t,e,n)=>(n=t!=null?V(J(t)):{},Q(e||!t||!t.__esModule?C(n,"default",{value:t,enumerable:!0}):n,t));var T=D(o=>{"use strict";var f=o&&o.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),h=o&&o.__assign||function(){return h=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},h.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});o.cloneNode=o.hasChildren=o.isDocument=o.isDirective=o.isComment=o.isText=o.isCDATA=o.isTag=o.Element=o.Document=o.NodeWithChildren=o.ProcessingInstruction=o.Comment=o.Text=o.DataNode=o.Node=void 0;var a=__domelementtype$,U=new Map([[a.ElementType.Tag,1],[a.ElementType.Script,1],[a.ElementType.Style,1],[a.ElementType.Directive,1],[a.ElementType.Text,3],[a.ElementType.CDATA,4],[a.ElementType.Comment,8],[a.ElementType.Root,9]]),x=function(){function t(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){var e;return(e=U.get(this.type))!==null&&e!==void 0?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){return e===void 0&&(e=!1),b(this,e)},t}();o.Node=x;var p=function(t){f(e,t);function e(n,i){var r=t.call(this,n)||this;return r.data=i,r}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),e}(x);o.DataNode=p;var I=function(t){f(e,t);function e(n){return t.call(this,a.ElementType.Text,n)||this}return e}(p);o.Text=I;var O=function(t){f(e,t);function e(n){return t.call(this,a.ElementType.Comment,n)||this}return e}(p);o.Comment=O;var _=function(t){f(e,t);function e(n,i){var r=t.call(this,a.ElementType.Directive,i)||this;return r.name=n,r}return e}(p);o.ProcessingInstruction=_;var m=function(t){f(e,t);function e(n,i){var r=t.call(this,n)||this;return r.children=i,r}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),e}(x);o.NodeWithChildren=m;var P=function(t){f(e,t);function e(n){return t.call(this,a.ElementType.Root,n)||this}return e}(m);o.Document=P;var j=function(t){f(e,t);function e(n,i,r,s){r===void 0&&(r=[]),s===void 0&&(s=n==="script"?a.ElementType.Script:n==="style"?a.ElementType.Style:a.ElementType.Tag);var c=t.call(this,s,r)||this;return c.name=n,c.attribs=i,c}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(i){var r,s;return{name:i,value:n.attribs[i],namespace:(r=n["x-attribsNamespace"])===null||r===void 0?void 0:r[i],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[i]}})},enumerable:!1,configurable:!0}),e}(m);o.Element=j;function S(t){return(0,a.isTag)(t)}o.isTag=S;function A(t){return t.type===a.ElementType.CDATA}o.isCDATA=A;function W(t){return t.type===a.ElementType.Text}o.isText=W;function M(t){return t.type===a.ElementType.Comment}o.isComment=M;function H(t){return t.type===a.ElementType.Directive}o.isDirective=H;function q(t){return t.type===a.ElementType.Root}o.isDocument=q;function X(t){return Object.prototype.hasOwnProperty.call(t,"children")}o.hasChildren=X;function b(t,e){e===void 0&&(e=!1);var n;if(W(t))n=new I(t.data);else if(M(t))n=new O(t.data);else if(S(t)){var i=e?g(t.children):[],r=new j(t.name,h({},t.attribs),i);i.forEach(function(k){return k.parent=r}),t.namespace!=null&&(r.namespace=t.namespace),t["x-attribsNamespace"]&&(r["x-attribsNamespace"]=h({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(r["x-attribsPrefix"]=h({},t["x-attribsPrefix"])),n=r}else if(A(t)){var i=e?g(t.children):[],s=new m(a.ElementType.CDATA,i);i.forEach(function(v){return v.parent=s}),n=s}else if(q(t)){var i=e?g(t.children):[],c=new P(i);i.forEach(function(v){return v.parent=c}),t["x-mode"]&&(c["x-mode"]=t["x-mode"]),n=c}else if(H(t)){var d=new _(t.name,t.data);t["x-name"]!=null&&(d["x-name"]=t["x-name"],d["x-publicId"]=t["x-publicId"],d["x-systemId"]=t["x-systemId"]),n=d}else throw new Error("Not implemented yet: ".concat(t.type));return n.startIndex=t.startIndex,n.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(n.sourceCodeLocation=t.sourceCodeLocation),n}o.cloneNode=b;function g(t){for(var e=t.map(function(i){return b(i,!0)}),n=1;n<e.length;n++)e[n].prev=e[n-1],e[n-1].next=e[n];return e}});var N=D(l=>{"use strict";var Y=l&&l.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Z=l&&l.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Y(e,t,n)};Object.defineProperty(l,"__esModule",{value:!0});l.DomHandler=void 0;var y=__domelementtype$,u=T();Z(T(),l);var $=/\s+/g,z={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},L=function(){function t(e,n,i){this.dom=[],this.root=new u.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(i=n,n=z),typeof e=="object"&&(n=e,e=void 0),this.callback=e??null,this.options=n??z,this.elementCB=i??null}return t.prototype.onparserinit=function(e){this.parser=e},t.prototype.onreset=function(){this.dom=[],this.root=new u.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},t.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},t.prototype.onerror=function(e){this.handleCallback(e)},t.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},t.prototype.onopentag=function(e,n){var i=this.options.xmlMode?y.ElementType.Tag:void 0,r=new u.Element(e,n,void 0,i);this.addNode(r),this.tagStack.push(r)},t.prototype.ontext=function(e){var n=this.options.normalizeWhitespace,i=this.lastNode;if(i&&i.type===y.ElementType.Text)n?i.data=(i.data+e).replace($," "):i.data+=e,this.options.withEndIndices&&(i.endIndex=this.parser.endIndex);else{n&&(e=e.replace($," "));var r=new u.Text(e);this.addNode(r),this.lastNode=r}},t.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===y.ElementType.Comment){this.lastNode.data+=e;return}var n=new u.Comment(e);this.addNode(n),this.lastNode=n},t.prototype.oncommentend=function(){this.lastNode=null},t.prototype.oncdatastart=function(){var e=new u.Text(""),n=new u.NodeWithChildren(y.ElementType.CDATA,[e]);this.addNode(n),e.parent=n,this.lastNode=e},t.prototype.oncdataend=function(){this.lastNode=null},t.prototype.onprocessinginstruction=function(e,n){var i=new u.ProcessingInstruction(e,n);this.addNode(i)},t.prototype.handleCallback=function(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e},t.prototype.addNode=function(e){var n=this.tagStack[this.tagStack.length-1],i=n.children[n.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),n.children.push(e),i&&(e.prev=i,i.next=e),e.parent=n,this.lastNode=null},t}();l.DomHandler=L;l.default=L});var R=w(N()),B=w(N()),{DomHandler:oe,Node:ae,DataNode:se,Text:le,Comment:ue,ProcessingInstruction:ce,NodeWithChildren:fe,Document:he,Element:de,isTag:pe,isCDATA:me,isText:ye,isComment:ve,isDirective:ge,isDocument:xe,hasChildren:be,cloneNode:Te}=B,{default:ee,...te}=B,Ne=R.default??ee??te;export{ue as Comment,se as DataNode,he as Document,oe as DomHandler,de as Element,ae as Node,fe as NodeWithChildren,ce as ProcessingInstruction,le as Text,Te as cloneNode,Ne as default,be as hasChildren,me as isCDATA,ve as isComment,ge as isDirective,xe as isDocument,pe as isTag,ye as isText};
